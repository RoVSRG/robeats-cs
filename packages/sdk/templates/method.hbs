{{#if paramDocs}}
{{#each paramDocs}}-- @param {{name}} {{{type}}}{{#if required}} (required){{/if}}{{#if description}} - {{{description}}}{{/if}}
{{/each}}{{/if}}
{{#if returnTypeAlias}}-- @return {{returnTypeAlias}}{{#if returnDescription}} - {{{returnDescription}}}{{/if}}{{/if}}
function {{moduleName}}.{{name}}({{#if signatureParams}}{{{signatureParams}}}{{else}}{{#each params}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}{{/if}}){{#if returnTypeAlias}}: {{returnTypeAlias}}{{/if}}
{{#each validations}}
	{{{this}}}
{{/each}}

	local config = {
		url = {{{url}}},
		headers = {
			Authorization = "Bearer " .. API_KEY,
			["Content-Type"] = "application/json"
		},
{{#if queryParams}}
		params = {
{{#each queryParams}}
			{{@key}} = tostring({{this}}),
{{/each}}
		},
{{/if}}
{{#if requestBody}}
		json = {
{{#each requestBody}}
			{{@key}} = {{this}},
{{/each}}
		},
{{/if}}
	}

	local response = Http.{{httpMethod}}(config.url, config)

	if not response.success or (response.statusCode and response.statusCode ~= 200) then
		local bodyStr = response.body and tostring(response.body) or "<no body>"
		error("HTTP " .. tostring(response.statusCode) .. " while calling {{name}}: " .. bodyStr)
	end

	return response.json()
end